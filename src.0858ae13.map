{"version":3,"sources":["../node_modules/hyperapp/src/index.js","components/Screen.js","cfg.js","components/DockBarIcon.js","components/DockBar.js","components/SystemTopBar.js","components/Draggable.js","components/apps/Browser.js","components/apps/Word.js","components/apps/Paint.js","libs.js","components/apps/Finder.js","components/apps/MusicPlayer.js","components/apps/AppSelector.js","components/AppWindow.js","components/Icon.js","model.js","index.js"],"names":["h","name","attributes","length","rest","children","arguments","push","node","pop","nodeName","key","app","state","actions","view","container","map","skipRender","rootElement","oldNode","recycleElement","element","toLowerCase","call","childNodes","nodeType","nodeValue","lifecycle","isRecycling","globalState","clone","wiredActions","wireStateToActions","path","action","data","result","getPartialState","then","scheduleRender","setPartialState","concat","resolveNode","render","patch","parent","isSvg","newElement","createElement","document","createTextNode","createElementNS","oncreate","i","appendChild","updateAttribute","insertBefore","removeElement","updateElement","oldAttributes","cb","onupdate","oldKeyed","newKeyed","oldElements","oldChildren","oldKey","getKey","k","newKey","keyedNode","setTimeout","target","source","out","value","slice","eventListener","event","currentTarget","events","type","oldValue","style","cssText","setProperty","addEventListener","removeEventListener","setAttribute","removeAttribute","done","removeChild","removeChildren","ondestroy","onremove","prosp","position","width","height","background","topBarHeight","extMap","folder","txt","jpg","html","mp3","extToType","iconByType","Finder","Word","Paint","Browser","MusicPlayer","newFileByType","fileName","payload","url","cover_art_url","DockBarIcon","handleClick","display","margin","transition","backgroundImage","backgroundSize","cursor","bottom","left","zIndex","justifyContent","borderRadius","SystemTopBar","props","color","top","padding","Clock","setInterval","updateTime","Date","time","toString","split","join","Draggable","x0","y0","ondrag","up","e","x","y","dx","dy","frame","dangerouslySetInnerHTML","innerHTML","boxSizing","overflow","flex","maxHeight","maxWidth","getExtension","file","ext","reverse","pathToArray","filter","el","getActiveFrame","Object","values","frames","sort","a","b","rnd","from","to","Math","random","rndInt","round","fillFolderWithImages","index","maxIndex","folderName","Icon","item","image","textAlign","wordBreak","goToDir","id","openFrame","activeFolder","fs","forEach","flexWrap","keys","AppSelector","typeToComponentMapping","Component","AppWindow","place","fullscreen","size","window","innerWidth","innerHeight","border","boxShadow","move","changeFullscreen","closeFrame","hide","alignItems","right","resize","borderBottom","borderLeft","getFile","icon","link","icons","photos","small","withOne","fn","newFrames","Number","max","activeFrame","newFrame","shown","openAppByType","framesCertainType","f","show","frameWithMaxZIndex","f1","f2","indexOf","maxZIndex","App","getElementById"],"mappings":"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","file":"src.0858ae13.map","sourceRoot":"../src","sourcesContent":["export function h(name, attributes) {\n  var rest = []\n  var children = []\n  var length = arguments.length\n\n  while (length-- > 2) rest.push(arguments[length])\n\n  while (rest.length) {\n    var node = rest.pop()\n    if (node && node.pop) {\n      for (length = node.length; length--; ) {\n        rest.push(node[length])\n      }\n    } else if (node != null && node !== true && node !== false) {\n      children.push(node)\n    }\n  }\n\n  return typeof name === \"function\"\n    ? name(attributes || {}, children)\n    : {\n        nodeName: name,\n        attributes: attributes || {},\n        children: children,\n        key: attributes && attributes.key\n      }\n}\n\nexport function app(state, actions, view, container) {\n  var map = [].map\n  var rootElement = (container && container.children[0]) || null\n  var oldNode = rootElement && recycleElement(rootElement)\n  var lifecycle = []\n  var skipRender\n  var isRecycling = true\n  var globalState = clone(state)\n  var wiredActions = wireStateToActions([], globalState, clone(actions))\n\n  scheduleRender()\n\n  return wiredActions\n\n  function recycleElement(element) {\n    return {\n      nodeName: element.nodeName.toLowerCase(),\n      attributes: {},\n      children: map.call(element.childNodes, function(element) {\n        return element.nodeType === 3 // Node.TEXT_NODE\n          ? element.nodeValue\n          : recycleElement(element)\n      })\n    }\n  }\n\n  function resolveNode(node) {\n    return typeof node === \"function\"\n      ? resolveNode(node(globalState, wiredActions))\n      : node != null\n        ? node\n        : \"\"\n  }\n\n  function render() {\n    skipRender = !skipRender\n\n    var node = resolveNode(view)\n\n    if (container && !skipRender) {\n      rootElement = patch(container, rootElement, oldNode, (oldNode = node))\n    }\n\n    isRecycling = false\n\n    while (lifecycle.length) lifecycle.pop()()\n  }\n\n  function scheduleRender() {\n    if (!skipRender) {\n      skipRender = true\n      setTimeout(render)\n    }\n  }\n\n  function clone(target, source) {\n    var out = {}\n\n    for (var i in target) out[i] = target[i]\n    for (var i in source) out[i] = source[i]\n\n    return out\n  }\n\n  function setPartialState(path, value, source) {\n    var target = {}\n    if (path.length) {\n      target[path[0]] =\n        path.length > 1\n          ? setPartialState(path.slice(1), value, source[path[0]])\n          : value\n      return clone(source, target)\n    }\n    return value\n  }\n\n  function getPartialState(path, source) {\n    var i = 0\n    while (i < path.length) {\n      source = source[path[i++]]\n    }\n    return source\n  }\n\n  function wireStateToActions(path, state, actions) {\n    for (var key in actions) {\n      typeof actions[key] === \"function\"\n        ? (function(key, action) {\n            actions[key] = function(data) {\n              var result = action(data)\n\n              if (typeof result === \"function\") {\n                result = result(getPartialState(path, globalState), actions)\n              }\n\n              if (\n                result &&\n                result !== (state = getPartialState(path, globalState)) &&\n                !result.then // !isPromise\n              ) {\n                scheduleRender(\n                  (globalState = setPartialState(\n                    path,\n                    clone(state, result),\n                    globalState\n                  ))\n                )\n              }\n\n              return result\n            }\n          })(key, actions[key])\n        : wireStateToActions(\n            path.concat(key),\n            (state[key] = clone(state[key])),\n            (actions[key] = clone(actions[key]))\n          )\n    }\n\n    return actions\n  }\n\n  function getKey(node) {\n    return node ? node.key : null\n  }\n\n  function eventListener(event) {\n    return event.currentTarget.events[event.type](event)\n  }\n\n  function updateAttribute(element, name, value, oldValue, isSvg) {\n    if (name === \"key\") {\n    } else if (name === \"style\") {\n      if (typeof value === \"string\") {\n        element.style.cssText = value\n      } else {\n        if (typeof oldValue === \"string\") oldValue = element.style.cssText = \"\"\n        for (var i in clone(oldValue, value)) {\n          var style = value == null || value[i] == null ? \"\" : value[i]\n          if (i[0] === \"-\") {\n            element.style.setProperty(i, style)\n          } else {\n            element.style[i] = style\n          }\n        }\n      }\n    } else {\n      if (name[0] === \"o\" && name[1] === \"n\") {\n        name = name.slice(2)\n\n        if (element.events) {\n          if (!oldValue) oldValue = element.events[name]\n        } else {\n          element.events = {}\n        }\n\n        element.events[name] = value\n\n        if (value) {\n          if (!oldValue) {\n            element.addEventListener(name, eventListener)\n          }\n        } else {\n          element.removeEventListener(name, eventListener)\n        }\n      } else if (\n        name in element &&\n        name !== \"list\" &&\n        name !== \"type\" &&\n        name !== \"draggable\" &&\n        name !== \"spellcheck\" &&\n        name !== \"translate\" &&\n        !isSvg\n      ) {\n        element[name] = value == null ? \"\" : value\n      } else if (value != null && value !== false) {\n        element.setAttribute(name, value)\n      }\n\n      if (value == null || value === false) {\n        element.removeAttribute(name)\n      }\n    }\n  }\n\n  function createElement(node, isSvg) {\n    var element =\n      typeof node === \"string\" || typeof node === \"number\"\n        ? document.createTextNode(node)\n        : (isSvg = isSvg || node.nodeName === \"svg\")\n          ? document.createElementNS(\n              \"http://www.w3.org/2000/svg\",\n              node.nodeName\n            )\n          : document.createElement(node.nodeName)\n\n    var attributes = node.attributes\n    if (attributes) {\n      if (attributes.oncreate) {\n        lifecycle.push(function() {\n          attributes.oncreate(element)\n        })\n      }\n\n      for (var i = 0; i < node.children.length; i++) {\n        element.appendChild(\n          createElement(\n            (node.children[i] = resolveNode(node.children[i])),\n            isSvg\n          )\n        )\n      }\n\n      for (var name in attributes) {\n        updateAttribute(element, name, attributes[name], null, isSvg)\n      }\n    }\n\n    return element\n  }\n\n  function updateElement(element, oldAttributes, attributes, isSvg) {\n    for (var name in clone(oldAttributes, attributes)) {\n      if (\n        attributes[name] !==\n        (name === \"value\" || name === \"checked\"\n          ? element[name]\n          : oldAttributes[name])\n      ) {\n        updateAttribute(\n          element,\n          name,\n          attributes[name],\n          oldAttributes[name],\n          isSvg\n        )\n      }\n    }\n\n    var cb = isRecycling ? attributes.oncreate : attributes.onupdate\n    if (cb) {\n      lifecycle.push(function() {\n        cb(element, oldAttributes)\n      })\n    }\n  }\n\n  function removeChildren(element, node) {\n    var attributes = node.attributes\n    if (attributes) {\n      for (var i = 0; i < node.children.length; i++) {\n        removeChildren(element.childNodes[i], node.children[i])\n      }\n\n      if (attributes.ondestroy) {\n        attributes.ondestroy(element)\n      }\n    }\n    return element\n  }\n\n  function removeElement(parent, element, node) {\n    function done() {\n      parent.removeChild(removeChildren(element, node))\n    }\n\n    var cb = node.attributes && node.attributes.onremove\n    if (cb) {\n      cb(element, done)\n    } else {\n      done()\n    }\n  }\n\n  function patch(parent, element, oldNode, node, isSvg) {\n    if (node === oldNode) {\n    } else if (oldNode == null || oldNode.nodeName !== node.nodeName) {\n      var newElement = createElement(node, isSvg)\n      parent.insertBefore(newElement, element)\n\n      if (oldNode != null) {\n        removeElement(parent, element, oldNode)\n      }\n\n      element = newElement\n    } else if (oldNode.nodeName == null) {\n      element.nodeValue = node\n    } else {\n      updateElement(\n        element,\n        oldNode.attributes,\n        node.attributes,\n        (isSvg = isSvg || node.nodeName === \"svg\")\n      )\n\n      var oldKeyed = {}\n      var newKeyed = {}\n      var oldElements = []\n      var oldChildren = oldNode.children\n      var children = node.children\n\n      for (var i = 0; i < oldChildren.length; i++) {\n        oldElements[i] = element.childNodes[i]\n\n        var oldKey = getKey(oldChildren[i])\n        if (oldKey != null) {\n          oldKeyed[oldKey] = [oldElements[i], oldChildren[i]]\n        }\n      }\n\n      var i = 0\n      var k = 0\n\n      while (k < children.length) {\n        var oldKey = getKey(oldChildren[i])\n        var newKey = getKey((children[k] = resolveNode(children[k])))\n\n        if (newKeyed[oldKey]) {\n          i++\n          continue\n        }\n\n        if (newKey != null && newKey === getKey(oldChildren[i + 1])) {\n          if (oldKey == null) {\n            removeElement(element, oldElements[i], oldChildren[i])\n          }\n          i++\n          continue\n        }\n\n        if (newKey == null || isRecycling) {\n          if (oldKey == null) {\n            patch(element, oldElements[i], oldChildren[i], children[k], isSvg)\n            k++\n          }\n          i++\n        } else {\n          var keyedNode = oldKeyed[newKey] || []\n\n          if (oldKey === newKey) {\n            patch(element, keyedNode[0], keyedNode[1], children[k], isSvg)\n            i++\n          } else if (keyedNode[0]) {\n            patch(\n              element,\n              element.insertBefore(keyedNode[0], oldElements[i]),\n              keyedNode[1],\n              children[k],\n              isSvg\n            )\n          } else {\n            patch(element, oldElements[i], null, children[k], isSvg)\n          }\n\n          newKeyed[newKey] = children[k]\n          k++\n        }\n      }\n\n      while (i < oldChildren.length) {\n        if (getKey(oldChildren[i]) == null) {\n          removeElement(element, oldElements[i], oldChildren[i])\n        }\n        i++\n      }\n\n      for (var i in oldKeyed) {\n        if (!newKeyed[i]) {\n          removeElement(element, oldKeyed[i][0], oldKeyed[i][1])\n        }\n      }\n    }\n    return element\n  }\n}\n","import { h } from \"hyperapp\";\n\nexport default (prosp, children) => (\n  <div\n    style={{\n      position: \"fixed\",\n      width: \"100%\",\n      height: \"100%\",\n      background: \"#158aa5\"\n    }}\n  >\n    {children}\n  </div>\n);\n","export const topBarHeight = 20;\nexport const extMap = {\n  folder: \"https://img.icons8.com/color/96/000000/folder-invoices.png\",\n  txt: \"https://img.icons8.com/color/96/000000/txt.png\",\n  jpg: \"https://img.icons8.com/color/96/000000/jpg.png\",\n  html: \"https://img.icons8.com/color/96/000000/html-filetype.png\",\n  mp3: \"https://img.icons8.com/color/96/000000/mp3.png\"\n};\n\nexport const extToType = {\n  folder: \"Finder\",\n  html: \"Browser\",\n  jpg: \"Paint\",\n  txt: \"Word\",\n  mp3: \"MusicPlayer\"\n};\n\nexport const iconByType = {\n  Finder: \"https://img.icons8.com/color/96/000000/computer.png\",\n  Word: \"https://img.icons8.com/color/96/000000/pen.png\",\n  Paint: \"https://img.icons8.com/color/96/000000/stack-of-photos.png\",\n  Browser: \"https://img.icons8.com/color/96/000000/firefox.png\",\n  MusicPlayer: \"https://img.icons8.com/color/48/000000/musical-notes.png\"\n};\n\nexport const newFileByType = {\n  Finder: { fileName: \"/\" },\n  Word: { fileName: \"new.txt\", payload: \"\" },\n  Paint: {\n    fileName: \"new.jpg\",\n    payload: \"http://placekitten.com/500/500\"\n  },\n  Browser: { fileName: \"new.html\", payload: \"https://www.wikipedia.org\" },\n  MusicPlayer: {\n    fileName: \"new.mp3\",\n    payload: {\n      url: \"https://521dimensions.com/songs/LORN - ANVIL.mp3\",\n      cover_art_url:\n        \"https://521dimensions.com/img/open-source/amplitudejs/album-art/anvil.jpg\"\n    }\n  }\n};\n","import { h } from \"hyperapp\";\nimport { iconByType } from \"../cfg\";\n\nconst DockBarIcon = ({ type, handleClick }, children) => {\n  return (\n    <div\n      key={type}\n      style={{\n        display: \"inline-block\",\n        height: \"40px\",\n        width: \"40px\",\n        margin: \"10px\",\n        transition: \"all 0.2s\",\n        backgroundImage: `url(${iconByType[type]})`,\n        backgroundSize: \"contain\",\n        cursor: \"pointer\"\n      }}\n      onclick={handleClick}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default DockBarIcon;\n","import { h } from \"hyperapp\";\n\nexport default (prosp, children) => (\n  <div\n    style={{\n      position: \"absolute\",\n      bottom: \"0\",\n      left: \"0\",\n      width: \"100%\",\n      zIndex: \"99999\",\n\n      display: \"flex\",\n      justifyContent: \"center\"\n    }}\n  >\n    <div\n      style={{\n        display: \"inline-block\",\n        // height: \"60px\",\n        background: \"black\",\n        borderRadius: \"10px 10px 0 0\",\n        zIndex: \"99999\"\n      }}\n    >\n      {children}\n    </div>\n  </div>\n);\n","import { h } from \"hyperapp\";\n\nimport { topBarHeight } from \"../cfg\";\n\nconst SystemTopBar = (props, children) => {\n  return (\n    <div\n      style={{\n        height: `${topBarHeight}px`,\n        width: \"100%\",\n        background: \"black\",\n        color: \"white\",\n        position: \"absolute\",\n        top: \"0\",\n        padding: \"0 5px\",\n        display: \"flex\",\n        justifyContent: \"space-between\"\n      }}\n    >\n      {children}\n    </div>\n  );\n};\n\nexport default SystemTopBar;\n\nexport const Clock = () => (state, actions) => (\n  <div oncreate={() => setInterval(() => actions.updateTime(new Date()), 1000)}>\n    {state.time\n      .toString()\n      .split(\" \")\n      .slice(0, 5)\n      .join(\" \")}\n  </div>\n);\n","import { h } from \"hyperapp\";\n\nlet x0;\nlet y0;\n\nconst Draggable = ({ ondrag, up = () => {} }, children) => (\n  <div\n    onmousedown={e => {\n      x0 = e.x;\n      y0 = e.y;\n      up();\n    }}\n    draggable\n    ondrag={e => {\n      // hack\n      if (e.x === 0 && e.y === 0) return;\n\n      const dx = e.x - x0;\n      const dy = e.y - y0;\n      ondrag(dx, dy);\n      x0 = e.x;\n      y0 = e.y;\n    }}\n  >\n    {children}\n  </div>\n);\n\nexport default Draggable;\n","import { h } from \"hyperapp\";\n\nconst Browser = ({ frame }) => (\n  <iframe width=\"100%\" height=\"100%\" src={frame.app.payload} title=\"browser\" />\n);\n\nexport default Browser;\n","import { h } from \"hyperapp\";\n\nfunction dangerouslySetInnerHTML(html) {\n  return element => {\n    element.innerHTML = html;\n  };\n}\n\nconst Word = ({ frame }) => (\n  <div\n    contenteditable=\"true\"\n    style={{\n      width: \"100%\",\n      height: \"100%\",\n      boxSizing: \"border-box\",\n      padding: \"10px\",\n      overflow: \"scroll\"\n    }}\n    oncreate={dangerouslySetInnerHTML(frame.app.payload)}\n  />\n);\n\nexport default Word;\n","import { h } from \"hyperapp\";\n\nconst Paint = ({ frame }) => (\n  <img\n    src={frame.app.payload}\n    alt=\"img\"\n    style={{\n      flex: \"none\",\n      maxHeight: \"100%\",\n      maxWidth: \"100%\"\n    }}\n  />\n);\n\nexport default Paint;\n","export const getExtension = file => {\n  const ext = file\n    .split(\"/\")\n    .reverse()[0]\n    .split(\".\")[1];\n\n  return ext ? ext : \"folder\";\n};\n\nexport const pathToArray = path => path.split(\"/\").filter(el => el);\n\nexport const getActiveFrame = state =>\n  Object.values(state.frames).sort((a, b) => b.zIndex - a.zIndex)[0];\n\nexport const rnd = (from, to) => from + Math.random() * (to - from);\nexport const rndInt = (from, to) => Math.round(rnd(from, to));\n\nexport const fillFolderWithImages = (folder, index, maxIndex) => {\n  for (let i = index; i < maxIndex; i++) {\n    if (Math.random() > 0.1) {\n      if (Math.random() > 0.3) {\n        const fileName = `cat_${i}.jpg`;\n        folder[fileName] = `http://placekitten.com/${rndInt(\n          100,\n          1000\n        )}/${rndInt(100, 1000)}`;\n      } else {\n        const fileName = `random_${i}.jpg`;\n        folder[fileName] = `https://picsum.photos/200/300?image=${i}`;\n      }\n    } else {\n      const folderName = `folder_${i}`;\n      folder[folderName] = {};\n      fillFolderWithImages(folder[folderName], i, maxIndex);\n    }\n  }\n};\n","import { h } from \"hyperapp\";\n\nimport { extMap } from \"../../cfg\";\nimport { getExtension, pathToArray } from \"../../libs\";\n\nconst Icon = ({ item, payload, frame }) => (state, actions) => {\n  const ext = getExtension(item);\n\n  const image = extMap[ext];\n\n  return (\n    <div\n      style={{\n        padding: \"5px\",\n        width: \"60px\",\n        textAlign: \"center\",\n        wordBreak: \"break-word\"\n      }}\n    >\n      <img\n        src={image}\n        height=\"40\"\n        alt=\"icon\"\n        style={{ cursor: \"pointer\" }}\n        ondblclick={() => {\n          if (ext === \"folder\") {\n            actions.frames.goToDir({\n              id: frame.id,\n              path: `/${pathToArray(frame.app.payload)\n                .concat([item])\n                .join(\"/\")}`\n            });\n          } else {\n            actions.openFrame({ fileName: item, payload });\n          }\n        }}\n      />\n      <div>{item}</div>\n    </div>\n  );\n};\n\nconst Finder = ({ frame }) => (state, actions) => {\n  const path = pathToArray(frame.app.payload);\n\n  let activeFolder = state.fs;\n\n  path.forEach(el => {\n    activeFolder = activeFolder[el];\n  });\n\n  return (\n    <div\n      style={{\n        width: \"100%\",\n        height: \"100%\",\n        overflow: \"scroll\"\n      }}\n    >\n      <div\n        style={{\n          display: \"flex\",\n          flexWrap: \"wrap\"\n        }}\n      >\n        {Object.keys(activeFolder).map(item => (\n          <Icon item={item} payload={activeFolder[item]} frame={frame} />\n        ))}\n      </div>\n\n      <div\n        style={{\n          position: \"absolute\",\n          bottom: \"0\",\n          color: \"white\",\n          background: \"black\",\n          width: \"100%\"\n        }}\n      >\n        <span\n          style={{ cursor: \"pointer\" }}\n          onclick={() =>\n            actions.frames.goToDir({\n              id: frame.id,\n              path: \"/\"\n            })\n          }\n        >\n          Disk >{\" \"}\n        </span>\n        {path.map((el, index) => (\n          <span\n            style={{ cursor: \"pointer\" }}\n            onclick={() =>\n              actions.frames.goToDir({\n                id: frame.id,\n                path: \"/\" + path.slice(0, index + 1).join(\"/\")\n              })\n            }\n          >\n            {el} >{\" \"}\n          </span>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Finder;\n","import { h } from \"hyperapp\";\n\nconst Paint = ({ frame }) => (\n  <div>\n    {frame.app.payload.cover_art_url && (\n      <img\n        src={frame.app.payload.cover_art_url}\n        alt=\"album-cover\"\n        style={{ width: \"100%\" }}\n      />\n    )}\n\n    <audio\n      controls=\"controls\"\n      autoplay=\"autoplay\"\n      style={{ width: \"100%\" }}\n      src={frame.app.payload.url}\n    />\n  </div>\n);\n\nexport default Paint;\n","import { h } from \"hyperapp\";\n\nimport Browser from \"./Browser\";\nimport Word from \"./Word\";\nimport Paint from \"./Paint\";\nimport Finder from \"./Finder\";\nimport MusicPlayer from \"./MusicPlayer\";\n\nconst typeToComponentMapping = {\n  Word,\n  Paint,\n  Finder,\n  MusicPlayer,\n  Browser\n};\n\nconst AppSelector = ({ frame }) => {\n  const Component = typeToComponentMapping[frame.app.type];\n\n  return <Component frame={frame} />;\n};\n\nexport default AppSelector;\n","import { h } from \"hyperapp\";\n\nimport Draggable from \"./Draggable\";\nimport AppSelector from \"./apps/AppSelector\";\nimport { topBarHeight } from \"../cfg\";\n\nconst AppWindow = ({ frame }) => (state, actions) => {\n  let place = frame.fullscreen\n    ? {\n        position: { x: 0, y: topBarHeight },\n        size: { x: window.innerWidth, y: window.innerHeight - topBarHeight }\n      }\n    : {\n        position: frame.position,\n        size: frame.size\n      };\n\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        top: place.position.y + \"px\",\n        left: place.position.x + \"px\",\n        width: place.size.x + \"px\",\n        height: place.size.y + \"px\",\n        border: \"1px solid black\",\n        background: \"white\",\n        borderRadius: \"5px\",\n        zIndex: frame.zIndex,\n        boxShadow: \"rgba(68, 68, 68, 0.75) 2px 2px 10px 0px\"\n      }}\n      onclick={() => actions.frames.up({ id: frame.id })}\n    >\n      <Draggable\n        ondrag={(dx, dy) => actions.frames.move({ id: frame.id, dx, dy })}\n        up={() => actions.frames.up({ id: frame.id })}\n      >\n        <div\n          style={{\n            height: \"20px\",\n            padding: \"0 5px\",\n            background: \"black\",\n            color: \"white\",\n            textAlign: \"center\",\n            cursor: \"move\"\n          }}\n          ondblclick={() => {\n            actions.frames.changeFullscreen({ id: frame.id });\n          }}\n        >\n          <div\n            style={{\n              position: \"absolute\",\n              left: 0\n            }}\n          >\n            <div\n              style={{\n                display: \"inline-block\",\n                background: \"red\",\n                width: \"10px\",\n                height: \"10px\",\n                borderRadius: \"50%\",\n                margin: \"0 0 0 5px\",\n                cursor: \"pointer\"\n              }}\n              onclick={() => actions.closeFrame({ id: frame.id })}\n            />\n            <div\n              style={{\n                display: \"inline-block\",\n                background: \"yellow\",\n                width: \"10px\",\n                height: \"10px\",\n                borderRadius: \"50%\",\n                margin: \"0 0 0 5px\",\n                cursor: \"pointer\"\n              }}\n              onclick={() => actions.frames.hide({ id: frame.id })}\n            />\n            <div\n              style={{\n                display: \"inline-block\",\n                background: \"green\",\n                width: \"10px\",\n                height: \"10px\",\n                borderRadius: \"50%\",\n                margin: \"0 0 0 5px\",\n                cursor: \"pointer\"\n              }}\n              onclick={() => {\n                actions.frames.changeFullscreen({ id: frame.id });\n              }}\n            />\n          </div>\n\n          {frame.app.type}\n        </div>\n      </Draggable>\n\n      <div\n        style={{\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          height: `calc(100% - ${topBarHeight}px)`\n        }}\n      >\n        <AppSelector frame={frame} />\n      </div>\n\n      <div\n        style={{\n          position: \"absolute\",\n          right: 0,\n          bottom: 0,\n          width: \"10px\",\n          height: \"10px\",\n          cursor: \"se-resize\"\n        }}\n      >\n        <Draggable\n          ondrag={(dx, dy) => actions.frames.resize({ id: frame.id, dx, dy })}\n          up={() => actions.frames.up({ id: frame.id })}\n        >\n          <div\n            style={{\n              width: 0,\n              height: 0,\n              borderBottom: \"10px solid black\",\n              borderLeft: \"10px solid transparent\"\n            }}\n          />\n        </Draggable>\n      </div>\n    </div>\n  );\n};\n\nexport default AppWindow;\n","import { h } from \"hyperapp\";\nimport Draggable from \"./Draggable\";\nimport { extMap } from \"../cfg\";\nimport { getExtension, pathToArray } from \"../libs\";\n\nconst getFile = (path, state) => {\n  let file = state.fs;\n\n  pathToArray(path).forEach(el => {\n    file = file[el];\n  });\n\n  return file;\n};\n\nexport const Icon = ({ icon }) => (state, actions) => {\n  const ext = getExtension(icon.link);\n  const image = extMap[ext];\n\n  const fileName = icon.link;\n  const payload = getFile(icon.link, state);\n\n  return (\n    <div\n      style={{\n        position: \"absolute\",\n        top: icon.position.y + \"px\",\n        left: icon.position.x + \"px\",\n        cursor: \"pointer\"\n      }}\n    >\n      <Draggable\n        ondrag={(dx, dy) => actions.icons.move({ id: icon.id, dx, dy })}\n      >\n        <img\n          src={image}\n          height=\"40\"\n          alt=\"icon\"\n          ondblclick={() => {\n            actions.openFrame({\n              fileName,\n              payload\n            });\n          }}\n        />\n      </Draggable>\n      <div\n        style={{\n          maxWidth: \"60px\",\n          color: \"white\",\n          textAlign: \"center\",\n          wordBreak: \"break-word\"\n        }}\n      >\n        {icon.name}\n      </div>\n    </div>\n  );\n};\n","import { getExtension, getActiveFrame, fillFolderWithImages } from \"./libs\";\nimport { extToType, newFileByType } from \"./cfg\";\n\nexport const state = {\n  time: new Date(),\n\n  fs: {\n    \"cat.jpg\": \"http://placekitten.com/200/300\",\n    \"wiki.html\": \"https://www.wikipedia.org\",\n    \"note.txt\": `\n      Some random notes about this fun program written with HyperApp\n    `,\n\n    \"Lorn-Anvil.mp3\": {\n      url: \"https://521dimensions.com/songs/LORN - ANVIL.mp3\",\n      cover_art_url:\n        \"https://521dimensions.com/img/open-source/amplitudejs/album-art/anvil.jpg\"\n    },\n\n    photos: {\n      \"1.jpg\": \"http://placekitten.com/500/500\",\n      \"2.jpg\": \"http://placekitten.com/500/200\",\n      small: {\n        \"3.jpg\": \"http://placekitten.com/100/100\",\n        \"4.jpg\": \"http://placekitten.com/100/50\"\n      }\n    }\n  },\n\n  icons: {\n    1: {\n      id: 1,\n      link: \"/cat.jpg\",\n      name: \"cat.jpg\",\n      position: { x: 900, y: 100 }\n    },\n    2: {\n      id: 2,\n      link: \"/photos\",\n      name: \"photos\",\n      position: { x: 900, y: 170 }\n    },\n    3: {\n      id: 3,\n      link: \"/wiki.html\",\n      name: \"wikipedia.html\",\n      position: { x: 970, y: 100 }\n    },\n    4: {\n      id: 4,\n      link: \"/note.txt\",\n      name: \"note.txt\",\n      position: { x: 900, y: 240 }\n    },\n    5: {\n      id: 5,\n      link: \"/Lorn-Anvil.mp3\",\n      name: \"lorn-anvil.mp3\",\n      position: { x: 970, y: 240 }\n    }\n  },\n\n  frames: {}\n};\n\nfillFolderWithImages(state.fs.photos, 0, 100);\n\nconst withOne = (id, fn) => state => {\n  if (!state[id]) return {};\n  return {\n    [id]: {\n      ...state[id],\n      ...fn(state[id])\n    }\n  };\n};\n\nexport const actions = {\n  updateTime: time => state => ({ ...state, time }),\n\n  icons: {\n    move: ({ id, dx, dy }) =>\n      withOne(id, icon => ({\n        position: {\n          x: icon.position.x + dx,\n          y: icon.position.y + dy\n        }\n      }))\n  },\n\n  closeFrame: ({ id }) => state => {\n    let newFrames = {};\n    Object.keys(state.frames)\n      .filter(key => Number(key) !== id)\n      .forEach(key => {\n        newFrames[key] = state.frames[key];\n      });\n\n    return { frames: newFrames };\n  },\n\n  openFrame: ({ fileName, payload = null }) => state => {\n    const id =\n      Math.max(\n        ...Object.keys(state.frames)\n          .map(Number)\n          .concat([0])\n      ) + 1;\n\n    const ext = getExtension(fileName);\n    const type = extToType[ext];\n\n    if (ext === \"folder\") payload = fileName;\n\n    const zIndex = (getActiveFrame(state) || { zIndex: 0 }).zIndex + 1;\n\n    const activeFrame = Object.values(state.frames).reverse()[0] || {\n      position: { x: 100, y: 100 }\n    };\n\n    const newFrame = {\n      id,\n      position: {\n        x: activeFrame.position.x + 20,\n        y: activeFrame.position.y + 20\n      },\n      size: {\n        x: 400,\n        y: 500\n      },\n      shown: true,\n      fullscreen: false,\n      zIndex,\n      app: {\n        type,\n        payload\n      }\n    };\n\n    return { frames: { ...state.frames, [id]: newFrame } };\n  },\n\n  openAppByType: ({ type }) => ({ frames }, actions) => {\n    const framesCertainType = Object.values(frames).filter(\n      f => f.app.type === type\n    );\n\n    if (framesCertainType.length === 0) {\n      actions.openFrame(newFileByType[type]);\n    } else if (framesCertainType.length === 1) {\n      const id = framesCertainType[0].id;\n\n      actions.frames.up({ id });\n      actions.frames.show({ id });\n    } else {\n      const frameWithMaxZIndex = framesCertainType.sort(\n        (f1, f2) => f2.zIndex - f1.zIndex\n      )[0];\n\n      framesCertainType.sort((f1, f2) => f2.id - f1.id);\n\n      const id =\n        framesCertainType[\n          (framesCertainType.indexOf(frameWithMaxZIndex) + 1) %\n            framesCertainType.length\n        ].id;\n\n      actions.frames.up({ id });\n      actions.frames.show({ id });\n    }\n  },\n\n  frames: {\n    goToDir: ({ id, path }) =>\n      withOne(id, frame => ({\n        app: {\n          ...frame.app,\n          payload: path\n        }\n      })),\n\n    move: ({ id, dx, dy }) =>\n      withOne(id, frame => ({\n        position: {\n          x: frame.position.x + dx,\n          y: frame.position.y + dy\n        }\n      })),\n\n    resize: ({ id, dx, dy }) =>\n      withOne(id, frame => ({\n        size: {\n          x: frame.size.x + dx,\n          y: frame.size.y + dy\n        }\n      })),\n\n    up: ({ id }) => state => {\n      let maxZIndex =\n        Math.max(...Object.values(state).map(frame => frame.zIndex)) + 1;\n\n      return withOne(id, frame => ({\n        zIndex: maxZIndex\n      }))(state);\n    },\n\n    changeFullscreen: ({ id }) =>\n      withOne(id, frame => ({\n        fullscreen: !frame.fullscreen\n      })),\n\n    show: ({ id }) =>\n      withOne(id, frame => ({\n        shown: true\n      })),\n\n    hide: ({ id }) =>\n      withOne(id, frame => ({\n        shown: false\n      }))\n  }\n};\n","import { h, app } from \"hyperapp\";\n\nimport Screen from \"./components/Screen\";\nimport DockBarIcon from \"./components/DockBarIcon\";\nimport DockBar from \"./components/DockBar\";\nimport SystemTopBar, { Clock } from \"./components/SystemTopBar\";\nimport AppWindow from \"./components/AppWindow\";\nimport { Icon } from \"./components/Icon\";\n\nimport { state, actions } from \"./model\";\n\nimport { getActiveFrame } from \"./libs\";\n\nimport { extToType } from \"./cfg\";\n\n// TODO:\n// menu for top bar\n// right mouse button menu (delete file and icon)\n\nconst App = (state, actions) => (\n  <Screen>\n    <SystemTopBar>\n      <div>\n        <span>JSOS </span>\n      </div>\n      <div>{(getActiveFrame(state) || { app: { type: \"-\" } }).app.type}</div>\n      <div>\n        <Clock />\n      </div>\n    </SystemTopBar>\n\n    {Object.values(state.icons).map(icon => (\n      <Icon key={icon.id} icon={icon} />\n    ))}\n\n    {Object.values(state.frames)\n      .filter(app => app.shown)\n      .map(app => (\n        <AppWindow key={app.id} frame={app} />\n      ))}\n\n    <DockBar>\n      {Object.values(extToType).map(type => (\n        <DockBarIcon\n          key={type}\n          type={type}\n          handleClick={() => {\n            actions.openAppByType({ type });\n          }}\n        />\n      ))}\n    </DockBar>\n  </Screen>\n);\n\nif (process.env.NODE_ENV !== \"production\") {\n  require(\"hyperapp-redux-devtools\")(app)(\n    state,\n    actions,\n    App,\n    document.getElementById(\"app\")\n  );\n} else {\n  app(state, actions, App, document.getElementById(\"app\"));\n}\n"]}